
<html>
<head>
  
  <title>Calculator</title>

  <link rel='stylesheet' type='text/css' media='screen' href='https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css'>

  <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />

  <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
  
  <style>
    /* Add your custom CSS styles here */
    body {
      font-family: Arial, sans-serif;
    }
    .container {
      width: 800px;
      height: 600px;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background-image: url('blockchain.jpg');
      background-size: cover;
      background-repeat: no-repeat;
    }
  </style>
  <py-env>
    - requests
    - pandas
  </py-env>
</head>
<body>
  <!-- HTML elements for the calculator GUI -->
  <h1>Calculator</h1>
  <label>Enter processing power (device in TH/s):</label>
  <input type="number" id="deviceInput" />
  <br />
  <label>Select a cryptocurrency:</label>
  <select id="coinSelect">
    <option value="BTC">Bitcoin (BTC)</option>
    <!-- Add more options for other cryptocurrencies -->
  </select>
  <br />
  <button id="calculateBtn">Calculate</button>
  <br />
  <div id="outputDiv"></div>

  <!-- PyScript code for the calculator functionality -->
  <py-script>
    import pandas as pd
    import requests
    device = Element("deviceInput")    
    
    op = Element("outputDiv")
    
    def BTCcalculator(r,device = 1 , coin = 'BTC'):
        block  = pd.read_csv('coins_data.csv')
        device_hash = device*10**12
        price = dict(requests.get(url='https://api.coindesk.com/v1/bpi/currentprice.json').json())
        pricee = float(price['bpi']['USD']['rate'].replace(',',''))
        i = block[block['coin'] == coin]
        block_reward = i['reward_block']
        difficulty = i['difficulty']
        price = i['price']
        profit = (86400 *block_reward*device_hash)/((2**32) * difficulty)
        a = float(profit*pricee) , float(profit*pricee*30) , float(profit*pricee*30*12 )
        op.write('درآمد شما' + f' {round(a[0],2)}$ per day \n {round(a[1],2)}$ per month \n {round(a[2],2)}$ per year')
        
    
    </py-script>
    
</body>
</html>
